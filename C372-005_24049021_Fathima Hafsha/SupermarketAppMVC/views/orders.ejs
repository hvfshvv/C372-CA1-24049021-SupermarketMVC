<%- include("partials/header"); %>

<h2 class="fw-bold mb-4">My Orders</h2>

<% if (!orders || orders.length === 0) { %>

    <div class="alert alert-info">
        You have not placed any orders yet.
    </div>

<% } else { %>

<div class="card shadow-sm p-3">

    <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Order ID</th>
                <th>Date</th>
                <th>Total Amount ($)</th>
                <th>Invoice</th>
            </tr>
        </thead>

        <tbody>
            <% orders.forEach(o => { %>
            <tr>
                <td>#<%= o.id %></td>
                <td><%= (new Date(o.order_date)).toLocaleString() %></td>
                <td>$<%= Number(o.total_amount).toFixed(2) %></td>
                <td>
                    <a href="/invoice/<%= o.id %>" 
                       class="btn btn-outline-primary btn-sm">Download</a>
                </td>
            </tr>
            <% }) %>
        </tbody>
    </table>

</div>

<% } %>

<a href="/shopping" class="btn btn-secondary mt-3">Back to Shop</a>

<%- include("partials/footer"); %>
